app.gfx.Visual=function(e,i,r){var n=this;var f={};f.id=e;f.imageUrl=i;f.frames=r===undefined?1:r|0;f.inited=false;f.frameskip={period:0,frame:0};f.html=null;n.id=function(){return f.id};n.frameskip=function(e,i){f.frameskip.period=e|0;f.frameskip.frame=i|0};n.skipFrame=function(e){return f.frameskip.period&&(e|0)%f.frameskip.period!==f.frameskip.frame};n.imageUrl=function(e){if(e!==undefined){f.imageUrl=e;n.imageUrlChanged=true;n.derived().imageUrlChanged=true}return f.imageUrl};n.imageUrlChanged=false;n.frames=function(){return f.frames|0};n._frame=0;n.frame=function(e){if(e!==undefined){n.derived()._frame=n._frame=(e|0)%f.frames|0}return n._frame};n.visible=false;n.html=function(e){if(e!==undefined){f.html=""+e;n.htmlChanged=true;n.derived().htmlChanged=true}return f.html};n.htmlChanged=false;n.position=new app.gfx.Position;n.size=new app.gfx.Size(0,0);n.init=function(e,i){if(!f.inited){app.gfx.Driver.current.addVisual(n.derived(),e,function(){n.derived()._frame=n._frame;if(i){i(n.derived())}f.inited=true})}};n.show=function(){n.derived().visible=n.visible=true};n.hide=function(){n.derived().visible=n.visible=false};n.cleanup=function(){app.gfx.Driver.current.removeVisual(f.id);f.inited=false;f=null;n=null}};