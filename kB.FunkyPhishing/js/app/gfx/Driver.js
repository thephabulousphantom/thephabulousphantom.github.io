app.gfx.Driver=function(){var e=Class.inherit(this);var i={};i.visuals={};i.devicePixelRatio=window.devicePixelRatio||1;e.devicePixelRatio=function(){return i.devicePixelRatio};e.screenSize={game:{x:12e3,y:16e3},browser:{x:null,y:null},physical:{x:null,y:null},scale:{x:null,y:null},translate:{x:null,y:null}};e.init=function(){try{var i=window,c=document,n=c.documentElement,r=c.getElementsByTagName("body")[0];e.screenSize.browser.x=i.innerWidth||n.clientWidth||r.clientWidth;e.screenSize.browser.y=i.innerHeight||n.clientHeight||r.clientHeight;e.screenSize.physical.x=e.screenSize.browser.x*e.devicePixelRatio()|0;e.screenSize.physical.y=e.screenSize.browser.y*e.devicePixelRatio()|0;e.screenSize.browser.x=e.screenSize.physical.x/e.devicePixelRatio();e.screenSize.browser.y=e.screenSize.physical.y/e.devicePixelRatio();if(e.screenSize.physical.x>e.screenSize.physical.y){if(e.screenSize.physical.y/e.screenSize.game.y*e.screenSize.game.x>e.screenSize.physical.x){e.screenSize.scale.x=e.screenSize.scale.y=1/(e.screenSize.game.x/e.screenSize.physical.x)}else{e.screenSize.scale.x=e.screenSize.scale.y=1/(e.screenSize.game.y/e.screenSize.physical.y)}}else{if(e.screenSize.physical.y/e.screenSize.game.y*e.screenSize.game.x<e.screenSize.physical.x){e.screenSize.scale.x=e.screenSize.scale.y=1/(e.screenSize.game.x/e.screenSize.physical.x)}else{e.screenSize.scale.x=e.screenSize.scale.y=1/(e.screenSize.game.y/e.screenSize.physical.y)}}e.screenSize.translate.x=(e.screenSize.physical.x-e.screenSize.scale.x*e.screenSize.game.x)/2;e.screenSize.translate.y=(e.screenSize.physical.y-e.screenSize.scale.y*e.screenSize.game.y)/2}catch(s){app.Application.log(s)}};e.cleanup=function(){};e.updateFrame=function(e){throw new app.NotImplementedException};e.addVisual=function(e,c,n){i.visuals[e.id()]=e};e.removeVisual=function(e){delete i.visuals[e]};e.showVisual=function(e){};e.hideVisual=function(e){}};app.gfx.Driver.current=null;app.gfx.Driver.load=function(e){if(app.gfx.Driver.current!==null){app.gfx.Driver.current.cleanup();delete app.gfx.Driver.current}app.gfx.Driver.current=e;app.gfx.Driver.current.init()};